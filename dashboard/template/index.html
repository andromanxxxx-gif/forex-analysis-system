<!DOCTYPE html>
<html>
<head>
    <title>Forex Analysis Dashboard</title>
</head>
<body>
    <h1>Forex Analysis Dashboard</h1>
    
    <form method="POST">
        <label for="pair">Select Pair:</label>
        <select name="pair" onchange="this.form.submit()">
            {% for p in pairs %}
            <option value="{{ p }}" {% if p == selected_pair %}selected{% endif %}>{{ p }}</option>
            {% endfor %}
        </select>
    </form>
    
    <h2>Technical Analysis</h2>
    <ul>
        <li>Signal: {{ signal.signal }}</li>
        <li>Take Profit: {{ signal.TP }}</li>
        <li>Stop Loss: {{ signal.SL }}</li>
    </ul>
    
    <h2>News Summary</h2>
    <p>{{ news }}</p>
    
    <h2>AI Recommendation (DeepSeek)</h2>
    <p>{{ ai_reco }}</p>
    
    <h2>Price Data</h2>
    <table border="1">
        <tr>
            {% for col in df[0].keys() %}
            <th>{{ col }}</th>
            {% endfor %}
        </tr>
        {% for row in df %}
        <tr>
            {% for col in row.values() %}
            <td>{{ col }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</body>
</html>
