<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: #2c3e50; color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .controls { background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .card { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .signal { font-size: 24px; font-weight: bold; margin: 10px 0; }
        .buy { color: green; }
        .sell { color: red; }
        .hold { color: orange; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Forex Analysis Dashboard</h1>
            <p>Simple and Clean Forex Analysis</p>
        </div>
        
        <div class="controls">
            <select id="pairSelect" onchange="loadData()">
                <option value="EURUSD">EUR/USD</option>
                <option value="GBPJPY">GBP/JPY</option>
                <option value="USDJPY">USD/JPY</option>
                <option value="GBPUSD">GBP/USD</option>
            </select>
            <button onclick="loadData()">Refresh</button>
            <span id="status" style="margin-left: 20px;"></span>
        </div>
        
        <div id="content">
            <div class="card">
                <h2>Loading data...</h2>
            </div>
        </div>
    </div>

    <script>
        async function loadData() {
            const pair = document.getElementById('pairSelect').value;
            const status = document.getElementById('status');
            
            status.textContent = 'Loading...';
            status.style.color = 'blue';
            
            try {
                const response = await fetch(`/get_data?pair=${pair}`);
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                updateDashboard(data);
                status.textContent = '✓ Loaded';
                status.style.color = 'green';
                
            } catch (error) {
                document.getElementById('content').innerHTML = `
                    <div class="card" style="color: red;">
                        <h2>Error</h2>
                        <p>${error.message}</p>
                    </div>
                `;
                status.textContent = '✗ Error';
                status.style.color = 'red';
            }
        }
        
        function updateDashboard(data) {
            const signalClass = data.signal.toLowerCase();
            
            document.getElementById('content').innerHTML = `
                <div class="card">
                    <h2>${data.pair} Analysis</h2>
                    <div class="signal ${signalClass}">${data.signal}</div>
                    <p>Confidence: ${data.confidence}%</p>
                    <p>Current Price: ${data.current_price}</p>
                    <p>Price Change: ${data.price_change}%</p>
                </div>
                
                <div class="card">
                    <h3>Trading Recommendations</h3>
                    <p>Take Profit: ${data.take_profit}</p>
                    <p>Stop Loss: ${data.stop_loss}</p>
                    <p>Risk/Reward: ${data.risk_reward}</p>
                </div>
                
                <div class="card">
                    <h3>Technical Indicators</h3>
                    <p>More indicators coming soon...</p>
                </div>
            `;
        }
        
        // Load data on page load
        loadData();
    </script>
</body>
</html>
