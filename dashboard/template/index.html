<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üìä AI Forex Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; background: #0d1117; color: #e6edf3; }
    header { background: #161b22; color: #58a6ff; padding: 15px; font-size: 22px; font-weight: bold; text-align: center; border-bottom: 1px solid #21262d; }
    .container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
    .card { background: #161b22; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.6); padding: 15px; }
    h3 { margin-top: 0; color: #58a6ff; border-bottom: 1px solid #21262d; padding-bottom: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    td, th { border: 1px solid #30363d; padding: 6px; font-size: 13px; }
    th { background: #21262d; text-align: left; color: #58a6ff; }
    .btn { padding: 8px 14px; margin-top: 10px; border: none; background: #238636; color: white; font-weight: bold; border-radius: 6px; cursor: pointer; transition: 0.2s; }
    .btn:hover { background: #2ea043; }
    select, input[type="checkbox"] { margin-top: 5px; background: #0d1117; color: #e6edf3; border: 1px solid #30363d; border-radius: 4px; padding: 4px; }
    .ai-buy { color: #2ecc71; font-weight: bold; }
    .ai-sell { color: #e74c3c; font-weight: bold; }
    .ai-hold { color: #f1c40f; font-weight: bold; }
    #priceChart { max-height: 450px; }
    footer { text-align: center; color: #8b949e; padding: 10px; font-size: 12px; border-top: 1px solid #21262d; margin-top: 20px; }
  </style>
</head>
<body>
  <header>üìä AI Forex Dashboard</header>

  <div class="container">
    <div class="card">
      <h3>‚öôÔ∏è Settings</h3>
      <label>Pair:
        <select id="pair">
          <option value="USDJPY">USDJPY</option>
          <option value="GBPJPY">GBPJPY</option>
          <option value="EURJPY">EURJPY</option>
          <option value="CHFJPY">CHFJPY</option>
        </select>
      </label><br>
      <label>Timeframe:
        <select id="timeframe">
          <option value="1H">1H</option>
          <option value="4H">4H</option>
          <option value="1D">1D</option>
        </select>
      </label><br>
      <label><input type="checkbox" id="useHistory"> Use Historical Data</label><br>
      <button class="btn" onclick="analyze()">Analyze</button>
    </div>

    <div class="card">
      <h3>ü§ñ AI Analysis (DeepSeek)</h3>
      <table>
        <tr><th>Signal</th><td id="ai_signal"></td></tr>
        <tr><th>Entry</th><td id="ai_entry"></td></tr>
        <tr><th>Stop Loss</th><td id="ai_sl"></td></tr>
        <tr><th>Take Profit 1</th><td id="ai_tp1"></td></tr>
        <tr><th>Take Profit 2</th><td id="ai_tp2"></td></tr>
        <tr><th>Confidence</th><td id="ai_conf"></td></tr>
      </table>
      <p id="ai_advice" style="font-size: 13px; margin-top: 8px; color: #9da7b3;"></p>
    </div>

    <div class="card" style="grid-column: span 2;">
      <h3>üìà Price Chart + EMA</h3>
      <canvas id="priceChart"></canvas>
    </div>

    <div class="card">
      <h3>üìä Technical Indicators</h3>
      <table>
        <tr><th>RSI</th><td id="ind_rsi"></td></tr>
        <tr><th>MACD</th><td id="ind_macd"></td></tr>
        <tr><th>SMA20</th><td id="ind_sma20"></td></tr>
        <tr><th>SMA50</th><td id="ind_sma50"></td></tr>
        <tr><th>EMA200</th><td id="ind_ema200"></td></tr>
        <tr><th>OBV</th><td id="ind_obv"></td></tr>
        <tr><th>Support</th><td id="ind_support"></td></tr>
        <tr><th>Resistance</th><td id="ind_resistance"></td></tr>
      </table>
    </div>

    <div
